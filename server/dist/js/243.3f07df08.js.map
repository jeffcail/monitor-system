{"version":3,"file":"js/243.3f07df08.js","mappings":"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","sources":["webpack://web/./src/views/machine/machine.vue","webpack://web/./src/views/machine/machine.vue?3ad4"],"sourcesContent":["import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-301a1f50\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"machine-list\"\n};\nconst _hoisted_2 = {\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_3 = {\n  style: {\n    \"margin-left\": \"10px\"\n  }\n};\nconst _hoisted_4 = {\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_5 = {\n  style: {\n    \"margin-left\": \"10px\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_7 = {\n  style: {\n    \"margin-left\": \"10px\"\n  }\n};\nconst _hoisted_8 = {\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_9 = {\n  style: {\n    \"margin-left\": \"10px\"\n  }\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\"发送指令\");\n\nconst _hoisted_11 = {\n  class: \"demo-pagination-block\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\" 指令    \");\n\nconst _hoisted_13 = {\n  class: \"dialog-footer\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\"取消\");\n\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\"发送\");\n\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { machineList, sendMachineCommond, updateMachineRemark } from '@/request/api';\nimport { ElMessage } from 'element-plus';\nexport default {\n  __name: 'machine',\n\n  setup(__props) {\n    let terminalBox = ref(null);\n    let term;\n    let socket; // 备注\n\n    const addMachineRemark = async row => {\n      let request = {\n        machine_code: row.machine_code,\n        ip: row.ip,\n        remark: row.remark\n      };\n      let res = await updateMachineRemark(request);\n      console.log(res);\n\n      if (res.code === 2000) {\n        ElMessage.success(res.msg);\n        machine_list();\n      }\n    };\n\n    const small = ref(false);\n    const disabled = ref(false);\n    const background = ref(false);\n    const router = useRouter(); // 发送指令\n\n    const sendCommondDisable = ref(false);\n    const sendCommondForm = ref({\n      content: \"\",\n      ip: \"\"\n    });\n\n    const sendCommond = row => {\n      sendCommondDisable.value = true;\n      sendCommondForm.value.ip = row.ip;\n    };\n\n    const sendCommondSubmit = async () => {\n      let request = {\n        ip: sendCommondForm.value.ip,\n        content: sendCommondForm.value.content\n      };\n      let res = await sendMachineCommond(request);\n      console.log(res);\n\n      if (res.code === 2000) {\n        ElMessage.success(\"指令发送成功\");\n        sendCommondDisable.value = false;\n        machine_list();\n      }\n    };\n\n    const showConsole = row => {\n      sessionStorage.setItem(`url`, `/monitor/machine/dial`);\n      router.push({\n        path: \"/monitor/machine/dial\",\n        query: {\n          id: row.ip\n        }\n      });\n    };\n\n    const total = ref(0);\n    const tableData = ref([]);\n    const formJsonIn = ref({\n      page: 1,\n      page_size: 10\n    });\n    const serve1 = ref();\n\n    const machine_list = async () => {\n      let request = {\n        page: formJsonIn.value.page,\n        page_size: formJsonIn.value.page_size\n      };\n      let res = await machineList(request); // console.log(res)\n\n      if (res.code !== 2000) {\n        res.data = [];\n      }\n\n      tableData.value = res.data.list;\n      total.value = res.data.total;\n    };\n\n    machine_list();\n\n    const handleSizeChange = row => {\n      formJsonIn.value.page_size = row;\n      formJsonIn.value.page = 1;\n      machine_list();\n    };\n\n    const handleCurrentChange = row => {\n      formJsonIn.value.page = row;\n      machine_list();\n    };\n\n    const handleDelete = row => {\n      ElMessageBox.confirm(`确定删除${row.host_name}吗?, 删除之前请先确定此客户端是否还在使用，还在使用中请勿删除`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        let res = deleteServe({\n          id: row.id\n        });\n        requestServeList();\n      }).catch(() => {\n        ElMessage.warning('取消删除');\n      });\n    };\n\n    return (_ctx, _cache) => {\n      const _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n      const _component_el_input = _resolveComponent(\"el-input\");\n\n      const _component_timer = _resolveComponent(\"timer\");\n\n      const _component_el_icon = _resolveComponent(\"el-icon\");\n\n      const _component_el_button = _resolveComponent(\"el-button\");\n\n      const _component_el_table = _resolveComponent(\"el-table\");\n\n      const _component_el_pagination = _resolveComponent(\"el-pagination\");\n\n      const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n      const _component_el_form = _resolveComponent(\"el-form\");\n\n      const _component_el_dialog = _resolveComponent(\"el-dialog\");\n\n      return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_table, {\n        data: tableData.value,\n        style: {\n          \"width\": \"100%\"\n        }\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_table_column, {\n          label: \"机器码\",\n          width: \"290\"\n        }, {\n          default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"span\", _hoisted_3, _toDisplayString(scope.row.machine_code), 1)])]),\n          _: 1\n        }), _createVNode(_component_el_table_column, {\n          label: \"IP\",\n          width: \"280\"\n        }, {\n          default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"span\", _hoisted_5, _toDisplayString(scope.row.ip), 1)])]),\n          _: 1\n        }), _createVNode(_component_el_table_column, {\n          label: \"主机名字\",\n          width: \"280\"\n        }, {\n          default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", _hoisted_7, _toDisplayString(scope.row.host_name), 1)])]),\n          _: 1\n        }), _createVNode(_component_el_table_column, {\n          label: \"备注\",\n          width: \"280\"\n        }, {\n          default: _withCtx(scope => [_createVNode(_component_el_input, {\n            modelValue: scope.row.remark,\n            \"onUpdate:modelValue\": $event => scope.row.remark = $event,\n            class: \"w-50 m-2\",\n            size: \"large\",\n            placeholder: \"请输入备注\",\n            onBlur: $event => addMachineRemark(scope.row)\n          }, null, 8, [\"modelValue\", \"onUpdate:modelValue\", \"onBlur\"])]),\n          _: 1\n        }), _createVNode(_component_el_table_column, {\n          label: \"创建时间\",\n          width: \"280\"\n        }, {\n          default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_timer)]),\n            _: 1\n          }), _createElementVNode(\"span\", _hoisted_9, _toDisplayString(scope.row.created_at), 1)])]),\n          _: 1\n        }), _createVNode(_component_el_table_column, {\n          label: \"操作\"\n        }, {\n          default: _withCtx(({\n            row\n          }) => [_createVNode(_component_el_button, {\n            size: \"big\",\n            type: \"success\",\n            onClick: $event => sendCommond(row)\n          }, {\n            default: _withCtx(() => [_hoisted_10]),\n            _: 2\n          }, 1032, [\"onClick\"])]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"data\"]), _createElementVNode(\"div\", _hoisted_11, [_createVNode(_component_el_pagination, {\n        currentPage: formJsonIn.value.page,\n        \"onUpdate:currentPage\": _cache[0] || (_cache[0] = $event => formJsonIn.value.page = $event),\n        \"page-size\": formJsonIn.value.page_size,\n        \"onUpdate:page-size\": _cache[1] || (_cache[1] = $event => formJsonIn.value.page_size = $event),\n        \"page-sizes\": [10, 20, 30, 40, 50],\n        small: small.value,\n        disabled: disabled.value,\n        background: background.value,\n        layout: \"total, sizes, prev, pager, next, jumper\",\n        total: total.value,\n        \"current-page\": formJsonIn.value.page,\n        onSizeChange: handleSizeChange,\n        onCurrentChange: handleCurrentChange\n      }, null, 8, [\"currentPage\", \"page-size\", \"small\", \"disabled\", \"background\", \"total\", \"current-page\"])])]), _createVNode(_component_el_dialog, {\n        modelValue: sendCommondDisable.value,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => sendCommondDisable.value = $event),\n        title: \"发送指令\",\n        width: \"30%\",\n        draggable: \"\"\n      }, {\n        footer: _withCtx(() => [_createElementVNode(\"span\", _hoisted_13, [_createVNode(_component_el_button, {\n          onClick: _cache[3] || (_cache[3] = $event => sendCommondDisable.value = false)\n        }, {\n          default: _withCtx(() => [_hoisted_14]),\n          _: 1\n        }), _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: sendCommondSubmit\n        }, {\n          default: _withCtx(() => [_hoisted_15]),\n          _: 1\n        })])]),\n        default: _withCtx(() => [_createVNode(_component_el_form, {\n          model: sendCommondForm.value\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, null, {\n            default: _withCtx(() => [_hoisted_12, _createVNode(_component_el_input, {\n              modelValue: sendCommondForm.value.content,\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => sendCommondForm.value.content = $event),\n              autocomplete: \"off\",\n              placeholder: \"指令为linux命令 如: ls && mkdir && cd /root/xxx/stat.sh\",\n              style: {\n                \"width\": \"400px\"\n              }\n            }, null, 8, [\"modelValue\"])]),\n            _: 1\n          })]),\n          _: 1\n        }, 8, [\"model\"])]),\n        _: 1\n      }, 8, [\"modelValue\"])], 64);\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import script from \"./machine.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./machine.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./machine.vue?vue&type=style&index=0&id=301a1f50&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/cc/bz/goweb/service-cloud-monitoring/server/web/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-301a1f50\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","style","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","__name","setup","__props","addMachineRemark","async","request","machine_code","row","ip","remark","res","console","log","code","msg","machine_list","small","disabled","background","sendCommondDisable","sendCommondForm","content","sendCommond","value","sendCommondSubmit","total","tableData","formJsonIn","page","page_size","data","list","handleSizeChange","handleCurrentChange","_ctx","_cache","_component_el_table_column","_component_el_input","_component_timer","_component_el_icon","_component_el_button","_component_el_table","_component_el_pagination","_component_el_form_item","_component_el_form","_component_el_dialog","_","default","label","width","scope","host_name","modelValue","$event","size","placeholder","onBlur","created_at","type","onClick","currentPage","layout","onSizeChange","onCurrentChange","title","draggable","footer","model","autocomplete","__exports__"],"sourceRoot":""}